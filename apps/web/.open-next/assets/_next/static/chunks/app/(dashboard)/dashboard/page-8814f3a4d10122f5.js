(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[337],{17378:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>M});var a=t(64390),i=t(74393),l=t(99130),r=t(93526),n=t(1070),d=t(99399),c=t(62348),o=t(90100),m=t(54203),x=t(45029),u=t(82855),h=t(28585),g=t(7935),j=t(67678),p=t(61154),v=t(38179),f=t(96702),b=t(37943);let N={theme:x.A,recommendation:u.A,alert:h.A,trend:g.A},y={high:"destructive",medium:"default",low:"secondary"};function w(e){let{data:s,isLoading:t,onRefresh:l,onCancel:r,isCancelling:n,jobStatus:d}=e;return(null==d?void 0:d.status)==="failed"||(null==d?void 0:d.status)==="cancelled"?(0,a.jsxs)(i.Zp,{className:"border-red-200 bg-red-50/50 shadow-sm",children:[(0,a.jsx)(i.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(i.ZB,{className:"flex items-center gap-2 text-red-700",children:[(0,a.jsx)(h.A,{className:"h-5 w-5"}),"Analysis Failed"]}),(0,a.jsx)(o.E,{variant:"destructive",className:"text-xs",children:"Failed"})]})}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-sm text-red-600/80",children:d.error||"Job failed or was cancelled"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(m.$,{onClick:l,variant:"default",size:"sm",className:"flex items-center gap-2",children:[(0,a.jsx)(j.A,{className:"h-3.5 w-3.5"}),"Try Again"]}),r&&(0,a.jsxs)(m.$,{onClick:r,variant:"outline",size:"sm",disabled:n,className:"flex items-center gap-2 bg-background",children:[(0,a.jsx)(p.A,{className:"h-3.5 w-3.5"}),n?"Cancelling...":"Clear"]})]})]})})]}):t&&(null==d?void 0:d.status)==="processing"?(0,a.jsxs)(i.Zp,{className:"border-primary/20 bg-primary/5 shadow-none",children:[(0,a.jsx)(i.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(i.ZB,{className:"flex items-center gap-2 text-primary",children:[(0,a.jsx)(x.A,{className:"h-5 w-5"}),"Generating Insights..."]}),(0,a.jsx)(o.E,{variant:"outline",className:"text-xs bg-background",children:"Processing"})]})}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[(0,a.jsx)("span",{children:"Analyzing feedback patterns..."}),(0,a.jsxs)("span",{children:[d.progress||0,"%"]})]}),(0,a.jsx)("div",{className:"h-2 bg-background rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-primary transition-all duration-500 ease-out",style:{width:"".concat(d.progress||0,"%")}})})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"This process usually takes about 10-20 seconds depending on your data volume."})]})})]}):s?(0,a.jsxs)(i.Zp,{className:"shadow-sm border-border/50",children:[(0,a.jsx)(i.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(x.A,{className:"h-5 w-5 text-amber-500"}),"AI Insights"]}),(0,a.jsxs)(o.E,{variant:"outline",className:"text-xs text-muted-foreground font-normal",children:["Generated"," ",(0,b.m)(new Date(s.generatedAt),{addSuffix:!0})]})]})}),(0,a.jsxs)(i.Wu,{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold tracking-tight text-foreground",children:"Executive Summary"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground leading-relaxed",children:s.summary})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold tracking-tight text-foreground",children:"Key Themes"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:s.keyThemes.map((e,s)=>(0,a.jsx)(o.E,{variant:"secondary",className:"px-3 py-1 text-xs font-medium bg-muted/50 hover:bg-muted",children:e},s))})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-8",children:[(null==s?void 0:s.recommendations)&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("h4",{className:"text-sm font-semibold tracking-tight text-foreground flex items-center gap-2",children:[(0,a.jsx)(v.A,{className:"h-4 w-4 text-emerald-500"}),"Recommendations"]}),(0,a.jsx)("ul",{className:"space-y-3",children:s.recommendations.map((e,s)=>(0,a.jsxs)("li",{className:"text-sm text-muted-foreground flex items-start gap-3 bg-muted/20 p-3 rounded-lg",children:[(0,a.jsx)("span",{className:"text-emerald-500 font-bold mt-0.5",children:"â€¢"}),(0,a.jsx)("span",{children:e})]},s))})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("h4",{className:"text-sm font-semibold tracking-tight text-foreground flex items-center gap-2",children:[(0,a.jsx)(g.A,{className:"h-4 w-4 text-primary"}),"Snapshot"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"p-3 rounded-lg bg-muted/30 border border-border/50",children:[(0,a.jsx)("div",{className:"text-xs text-muted-foreground uppercase tracking-wider font-medium mb-1",children:"Total Feedback"}),(0,a.jsx)("div",{className:"text-2xl font-bold tracking-tight",children:s.statistics.totalFeedback})]}),(0,a.jsxs)("div",{className:"p-3 rounded-lg bg-muted/30 border border-border/50",children:[(0,a.jsx)("div",{className:"text-xs text-muted-foreground uppercase tracking-wider font-medium mb-1",children:"Avg. Rating"}),(0,a.jsx)("div",{className:"text-2xl font-bold tracking-tight",children:s.statistics.averageRating.toFixed(1)})]}),(0,a.jsxs)("div",{className:"p-3 rounded-lg bg-emerald-500/5 border border-emerald-500/20",children:[(0,a.jsx)("div",{className:"text-xs text-emerald-700 uppercase tracking-wider font-medium mb-1",children:"Positive"}),(0,a.jsxs)("div",{className:"text-2xl font-bold text-emerald-600",children:[s.statistics.positivePercentage,"%"]})]}),(0,a.jsxs)("div",{className:"p-3 rounded-lg bg-rose-500/5 border border-rose-500/20",children:[(0,a.jsx)("div",{className:"text-xs text-rose-700 uppercase tracking-wider font-medium mb-1",children:"Negative"}),(0,a.jsxs)("div",{className:"text-2xl font-bold text-rose-600",children:[s.statistics.negativePercentage,"%"]})]})]})]})]}),(null==s?void 0:s.insights)&&(0,a.jsxs)("div",{className:"space-y-3 pt-4 border-t border-border/50",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold tracking-tight text-foreground",children:"Detailed Findings"}),(0,a.jsx)("div",{className:"grid gap-3",children:s.insights.map((e,s)=>{let t=N[e.type];return(0,a.jsx)(f.P.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},transition:{delay:.05*s},className:"group p-4 border border-border/50 rounded-lg bg-card hover:shadow-sm hover:border-primary/20 transition-all duration-200",children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"mt-1 p-2 rounded-md bg-muted/50 group-hover:bg-primary/5 transition-colors",children:(0,a.jsx)(t,{className:"h-4 w-4 text-muted-foreground group-hover:text-primary"})}),(0,a.jsxs)("div",{className:"flex-1 space-y-1.5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h5",{className:"text-sm font-semibold text-foreground",children:e.title}),(0,a.jsx)(o.E,{variant:y[e.priority],className:"text-[10px] uppercase tracking-wider font-medium px-2 py-0.5",children:e.priority})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground leading-relaxed",children:e.description})]})]})},s)})})]})]})]}):null}var k=t(78588),A=t(89461),S=t(62442),I=t(38155),F=t(12154),C=t(95310),P=t(68616),R=t(26141),K=t(16204),W=t(97838),q=t(63541),L=t(5673),Z=t(49935),D=t(88088),E=t(88651),O=t(2429),B=t(15225),T=t(11473),z=t(75196),G=t(18694),J=t(30861),_=t(51875);function M(){let{selectedProjectId:e}=(0,A.I)(),s=e||void 0,{data:t,isLoading:o}=(0,k.Xk)({projectId:s}),{data:u,isLoading:h}=(0,k.Ku)({projectId:s,limit:50}),{data:p,isLoading:v}=(0,k.ox)({projectId:s,days:30}),{data:N,isLoading:y,refetch:M}=(0,k.z3)({projectId:s}),{data:Q,isLoading:$,refetch:U,hasActiveJob:V,isProcessing:X,jobStatus:H,createJob:Y,cancelJob:ee,isCancelling:es}=(0,k.qh)({projectId:s}),[et,ea]=(0,G.useState)(""),[ei,el]=(0,G.useState)("all"),[er,en]=(0,G.useState)("all"),[ed,ec]=(0,G.useState)(!1);if((0,G.useEffect)(()=>{t&&t.total>0&&(ec(!0),M())},[t,M]),o||h||v)return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"h-8 bg-muted rounded w-48 animate-pulse"}),(0,a.jsx)("div",{className:"h-4 bg-muted rounded w-64 animate-pulse"})]})}),(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,a.jsxs)(i.Zp,{className:"border-none shadow-sm bg-card",children:[(0,a.jsx)(i.aR,{className:"space-y-0 pb-2",children:(0,a.jsx)("div",{className:"h-4 bg-muted rounded w-24 animate-pulse"})}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)("div",{className:"h-8 bg-muted rounded w-16 animate-pulse"})})]},s))}),(0,a.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-2 h-96 bg-muted/50 rounded-lg animate-pulse"}),(0,a.jsx)("div",{className:"h-96 bg-muted/50 rounded-lg animate-pulse"})]})]});let eo=Q||N,em=(null==u?void 0:u.filter(e=>{let s=""===et||e.text.toLowerCase().includes(et.toLowerCase()),t="all"===ei||e.sentiment===ei,a="all"===er||e.category===er;return s&&t&&a}))||[],ex=(null==p?void 0:p.map(e=>({date:new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric"}),positive:e.positive,negative:e.negative,neutral:e.neutral,total:e.positive+e.negative+e.neutral})))||[],eu=ex.slice(-7),eh=ex.slice(-7).map(e=>({date:e.date,rating:3.5+1.5*Math.random()})),eg=ex.slice(-7).map(e=>({date:e.date,positive:Math.round(e.positive/e.total*100)||0}));t&&Object.entries(t.categoryBreakdown).map(e=>{let[s,t]=e;return{category:s.charAt(0).toUpperCase(),count:t}});let ej=t?[{name:"Positive",value:t.sentimentDistribution.positive,color:"#10b981"},{name:"Neutral",value:t.sentimentDistribution.neutral,color:"#71717a"},{name:"Negative",value:t.sentimentDistribution.negative,color:"#f43f5e"}]:[],ep={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{duration:.3}}};return(0,a.jsxs)(f.P.div,{initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"Dashboard"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Overview of your project's performance."})]}),(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsxs)(m.$,{variant:"outline",onClick:()=>U(),disabled:$||V,className:"gap-2 bg-background",children:[V&&(null==H?void 0:H.status)==="processing"?(0,a.jsx)(j.A,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(x.A,{className:"h-4 w-4"}),V?(null==H?void 0:H.status)==="processing"?"Processing...":"In Queue...":$?"Starting...":"Generate Insights"]})})]}),ed?ed&&t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(f.P.div,{variants:ep,className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[(0,a.jsx)(l.h,{title:"Total Feedback",value:t.total.toLocaleString(),description:"All-time feedback",icon:I.A,chart:(0,a.jsx)(R.u,{width:"100%",height:"100%",children:(0,a.jsx)(K.Q,{data:eu,children:(0,a.jsx)(W.G,{type:"monotone",dataKey:"total",stroke:"hsl(var(--primary))",strokeWidth:2,fill:"hsl(var(--primary))",fillOpacity:.1})})})}),(0,a.jsx)(l.h,{title:"Average Rating",value:t.averageRating.toFixed(1),description:"Out of 5 stars",icon:F.A,chart:(0,a.jsx)(R.u,{width:"100%",height:"100%",children:(0,a.jsx)(q.b,{data:eh,children:(0,a.jsx)(L.N,{type:"monotone",dataKey:"rating",stroke:"#f59e0b",strokeWidth:2,dot:!1})})})}),(0,a.jsx)(l.h,{title:"Positive Sentiment",value:(null==t?void 0:t.sentimentDistribution.positive)?"".concat(Math.round(t.sentimentDistribution.positive/t.total*100),"%"):"0%",description:"Based on AI analysis",icon:g.A,chart:(0,a.jsx)(R.u,{width:"100%",height:"100%",children:(0,a.jsx)(K.Q,{data:eg,children:(0,a.jsx)(W.G,{type:"monotone",dataKey:"positive",stroke:"#10b981",strokeWidth:2,fill:"#10b981",fillOpacity:.1})})})})]}),(eo||V)&&(0,a.jsx)(f.P.div,{variants:ep,children:(0,a.jsx)(w,{data:eo,isLoading:y||X,onRefresh:()=>U(),onCancel:()=>ee(),isCancelling:es,jobStatus:H})}),(0,a.jsxs)(f.P.div,{variants:ep,className:"grid gap-6 lg:grid-cols-3",children:[(0,a.jsxs)(i.Zp,{className:"lg:col-span-2 shadow-sm border-border/50",children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsx)(i.ZB,{children:"Feedback Trends"}),(0,a.jsx)(i.BT,{children:"Sentiment volume over the last 30 days"})]}),(0,a.jsx)(i.Wu,{className:"pl-0",children:(0,a.jsx)("div",{className:"h-[300px] w-full",children:(0,a.jsx)(R.u,{width:"100%",height:"100%",children:(0,a.jsxs)(K.Q,{data:ex,margin:{top:10,right:30,left:0,bottom:0},children:[(0,a.jsx)(Z.d,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--border))",opacity:.5}),(0,a.jsx)(D.W,{dataKey:"date",stroke:"hsl(var(--muted-foreground))",fontSize:12,tickLine:!1,axisLine:!1,tickMargin:10}),(0,a.jsx)(E.h,{stroke:"hsl(var(--muted-foreground))",fontSize:12,tickLine:!1,axisLine:!1,tickMargin:10}),(0,a.jsx)(O.m,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},labelStyle:{color:"hsl(var(--muted-foreground))"}}),(0,a.jsx)(W.G,{type:"monotone",dataKey:"positive",stackId:"1",stroke:"#10b981",fill:"#10b981",fillOpacity:.1,strokeWidth:2}),(0,a.jsx)(W.G,{type:"monotone",dataKey:"neutral",stackId:"1",stroke:"#71717a",fill:"#71717a",fillOpacity:.1,strokeWidth:2}),(0,a.jsx)(W.G,{type:"monotone",dataKey:"negative",stackId:"1",stroke:"#f43f5e",fill:"#f43f5e",fillOpacity:.1,strokeWidth:2})]})})})})]}),(0,a.jsxs)(i.Zp,{className:"shadow-sm border-border/50",children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsx)(i.ZB,{children:"Sentiment Split"}),(0,a.jsx)(i.BT,{children:"Distribution by type"})]}),(0,a.jsxs)(i.Wu,{children:[(0,a.jsx)("div",{className:"h-[200px] flex items-center justify-center",children:(0,a.jsx)(R.u,{width:"100%",height:"100%",children:(0,a.jsxs)(B.r,{children:[(0,a.jsx)(T.F,{data:ej,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",children:ej.map((e,s)=>(0,a.jsx)(z.f,{fill:e.color,strokeWidth:0},"cell-".concat(s)))}),(0,a.jsx)(O.m,{})]})})}),(0,a.jsx)("div",{className:"space-y-4 mt-6",children:ej.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:e.color}}),(0,a.jsx)("span",{className:"font-medium text-foreground",children:e.name})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,a.jsx)("span",{children:e.value}),(0,a.jsxs)("span",{className:"text-xs",children:["(",Math.round(e.value/t.total*100),"%)"]})]})]},e.name))})]})]})]}),(0,a.jsxs)(f.P.div,{variants:ep,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold tracking-tight",children:"Recent Feedback"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Latest comments from your users"})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,a.jsxs)("div",{className:"relative w-full sm:w-64",children:[(0,a.jsx)(C.A,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(J.p,{placeholder:"Search...",value:et,onChange:e=>ea(e.target.value),className:"pl-8 h-9 bg-background"})]}),(0,a.jsxs)(_.l6,{value:ei,onValueChange:e=>el(e),children:[(0,a.jsx)(_.bq,{className:"w-[130px] h-9 bg-background",children:(0,a.jsx)(_.yv,{placeholder:"Sentiment"})}),(0,a.jsxs)(_.gC,{children:[(0,a.jsx)(_.eb,{value:"all",children:"All Sentiments"}),(0,a.jsx)(_.eb,{value:"positive",children:"Positive"}),(0,a.jsx)(_.eb,{value:"neutral",children:"Neutral"}),(0,a.jsx)(_.eb,{value:"negative",children:"Negative"})]})]}),(0,a.jsxs)(_.l6,{value:er,onValueChange:e=>en(e),children:[(0,a.jsx)(_.bq,{className:"w-[130px] h-9 bg-background",children:(0,a.jsx)(_.yv,{placeholder:"Category"})}),(0,a.jsxs)(_.gC,{children:[(0,a.jsx)(_.eb,{value:"all",children:"All Categories"}),(0,a.jsx)(_.eb,{value:"bug",children:"Bug"}),(0,a.jsx)(_.eb,{value:"feature",children:"Feature"}),(0,a.jsx)(_.eb,{value:"improvement",children:"Improvement"}),(0,a.jsx)(_.eb,{value:"complaint",children:"Complaint"}),(0,a.jsx)(_.eb,{value:"praise",children:"Praise"}),(0,a.jsx)(_.eb,{value:"other",children:"Other"})]})]})]})]}),(0,a.jsx)(i.Zp,{className:"shadow-sm border-border/50",children:(0,a.jsx)(i.Wu,{className:"p-0",children:(0,a.jsx)("div",{className:"divide-y divide-border/50",children:em.length>0?em.map(e=>(0,a.jsxs)("div",{className:"flex flex-col gap-3 p-4 hover:bg-muted/20 transition-colors sm:flex-row sm:items-start sm:justify-between",children:[(0,a.jsxs)("div",{className:"space-y-2 flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,a.jsx)(r.b,{sentiment:e.sentiment}),(0,a.jsx)(d.i,{category:e.category})]}),(0,a.jsx)("p",{className:"text-sm text-foreground/90 leading-relaxed",children:e.text})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 sm:flex-col sm:items-end sm:gap-1 shrink-0",children:[(0,a.jsx)(n.z,{rating:e.rating,size:"sm"}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:(0,b.m)(new Date(e.createdAt),{addSuffix:!0})})]})]},e.id)):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-muted-foreground",children:[(0,a.jsx)("div",{className:"h-12 w-12 rounded-full bg-muted/50 flex items-center justify-center mb-4",children:(0,a.jsx)(P.A,{className:"h-6 w-6 opacity-50"})}),(0,a.jsx)("p",{className:"font-medium text-sm",children:"No feedback matches your filters"})]})})})})]})]}):null:(0,a.jsx)(f.P.div,{variants:ep,children:(0,a.jsx)(i.Zp,{className:"border-dashed shadow-none bg-muted/30",children:(0,a.jsx)(i.Wu,{className:"pt-12 pb-12",children:(0,a.jsx)(c.p,{icon:S.A,title:"No feedback yet",description:"Create a project and embed the widget to start collecting feedback."})})})})]})}},78588:(e,s,t)=>{"use strict";t.d(s,{Ku:()=>c,Xk:()=>n,ox:()=>d,qh:()=>h,z3:()=>o});var a=t(36843),i=t(75439),l=t(18694),r=t(33797);function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.I)({queryKey:["analytics","overview",e],queryFn:()=>r.F.getAnalyticsOverview(e)})}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.I)({queryKey:["analytics","trends",e],queryFn:()=>r.F.getAnalyticsTrends(e)})}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.I)({queryKey:["analytics","recent",e],queryFn:()=>r.F.getRecentFeedback(e)})}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.I)({queryKey:["insights","existing",e],queryFn:()=>r.F.getInsights(e),enabled:!1})}let m="reactly-insights-job";function x(){return localStorage.getItem(m)}function u(e){e?localStorage.setItem(m,e):localStorage.removeItem(m)}function h(){var e,s,t;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[d,c]=(0,l.useState)(x()),[o,m]=(0,l.useState)(!1);(0,l.useEffect)(()=>{if(!d||o)return;m(!0);let e=setInterval(async()=>{try{let s=await r.F.getInsightsJobStatus(d);("completed"===s.status||"failed"===s.status||"cancelled"===s.status||"not_found"===s.status)&&(clearInterval(e),m(!1),c(null),u(null))}catch(s){console.error("Error polling job status:",s),clearInterval(e),m(!1)}},2e3);return()=>{clearInterval(e),m(!1)}},[d]),(0,l.useEffect)(()=>{let e=x();e&&!d&&c(e)},[]);let h=(0,i.n)({mutationFn:()=>r.F.createInsightsJob(n),onSuccess:e=>{c(e.jobId),u(e.jobId)}}),g=(0,i.n)({mutationFn:()=>d?r.F.cancelInsightsJob(d):Promise.resolve(),onSuccess:()=>{c(null),u(null)}}),j=(0,a.I)({queryKey:["insights","job-status",d],queryFn:()=>d?r.F.getInsightsJobStatus(d):null,enabled:!!d&&o,refetchInterval:!!o&&2e3,retry:3}),p=(0,a.I)({queryKey:["insights","job-result",d],queryFn:()=>{var e,s;return(null==(e=j.data)?void 0:e.status)==="completed"&&(null==(s=j.data)?void 0:s.result)?j.data.result:null},enabled:!!d&&(null==(e=j.data)?void 0:e.status)==="completed",staleTime:1/0}),v=!!(d&&j.data&&["pending","processing"].includes(j.data.status)),f=!!(d&&((null==(s=j.data)?void 0:s.status)==="pending"||(null==(t=j.data)?void 0:t.status)==="processing"));return{createJob:h.mutate,cancelJob:g.mutate,isCreating:h.isPending,isCancelling:g.isPending,jobId:d,jobStatus:j.data||void 0,jobResult:p.data||void 0,hasActiveJob:f,isProcessing:v,data:p.data||null,isLoading:h.isPending||v,refetch:()=>{f||h.mutate()}}}},95039:(e,s,t)=>{Promise.resolve().then(t.bind(t,17378))},99130:(e,s,t)=>{"use strict";t.d(s,{h:()=>l});var a=t(64390),i=t(74393);function l(e){let{title:s,value:t,description:l,icon:r,trend:n,chart:d}=e;return(0,a.jsxs)(i.Zp,{className:"hover:shadow-md transition-shadow duration-200",children:[(0,a.jsxs)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.ZB,{className:"text-sm font-medium",children:s}),(0,a.jsx)(r,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(i.Wu,{className:"space-y-3",children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:t}),d&&(0,a.jsx)("div",{className:"h-12 -mt-1",children:d}),l&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:l}),n&&(0,a.jsxs)("p",{className:"text-xs mt-1 ".concat(n.isPositive?"text-green-600":"text-red-600"),children:[n.isPositive?"+":"",n.value,"% from last month"]})]})]})}}},e=>{e.O(0,[534,672,415,405,428,57,943,716,456,795,330,952,934,358],()=>e(e.s=95039)),_N_E=e.O()}]);