(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[352],{1788:(e,t,s)=>{Promise.resolve().then(s.bind(s,98242))},12154:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(95623).A)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},48795:(e,t,s)=>{"use strict";s.d(t,{dj:()=>x});var a=s(18694);let l=0,r=new Map,n=e=>{if(r.has(e))return;let t=setTimeout(()=>{r.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);r.set(e,t)},i=[],d={toasts:[]};function c(e){d=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?n(s):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(d,e),i.forEach(e=>{e(d)})}function o(e){let{...t}=e,s=(l=(l+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function x(){let[e,t]=a.useState(d);return a.useEffect(()=>(i.push(t),()=>{let e=i.indexOf(t);e>-1&&i.splice(e,1)}),[e]),{...e,toast:o,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},52244:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(95623).A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},60291:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(95623).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},62442:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(95623).A)("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]])},63947:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(95623).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},95310:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(95623).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},98242:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>O});var a=s(64390),l=s(18694),r=s(74393),n=s(54203),i=s(30861),d=s(51875),c=s(71464);let o=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,c.cn)("w-full caption-bottom text-sm",s),...l})})});o.displayName="Table";let x=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("thead",{ref:t,className:(0,c.cn)("[&_tr]:border-b",s),...l})});x.displayName="TableHeader";let u=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,c.cn)("[&_tr:last-child]:border-0",s),...l})});u.displayName="TableBody",l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,c.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...l})}).displayName="TableFooter";let m=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("tr",{ref:t,className:(0,c.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...l})});m.displayName="TableRow";let h=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("th",{ref:t,className:(0,c.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...l})});h.displayName="TableHead";let p=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("td",{ref:t,className:(0,c.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...l})});p.displayName="TableCell",l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("caption",{ref:t,className:(0,c.cn)("mt-4 text-sm text-muted-foreground",s),...l})}).displayName="TableCaption";var f=s(93526),j=s(1070),g=s(99399),v=s(62348),b=s(36843),N=s(40793),y=s(75439),w=s(33797),k=s(48795),A=s(89461);let S=(0,s(95623).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var T=s(95310),E=s(62442),C=s(60291),R=s(63947),_=s(52244),M=s(37943);function O(){var e,t;let{selectedProjectId:s}=(0,A.I)(),[c,O]=(0,l.useState)(""),[D,I]=(0,l.useState)("all"),[F,q]=(0,l.useState)("all"),[z,P]=(0,l.useState)(1),{data:V,isLoading:H}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,b.I)({queryKey:["feedback",e],queryFn:()=>w.F.getFeedback(e)})}({projectId:s||void 0,search:c||void 0,sentiment:"all"!==D?D:void 0,category:"all"!==F?F:void 0,page:z,pageSize:20}),U=function(){let e=(0,N.jE)(),{toast:t}=(0,k.dj)();return(0,y.n)({mutationFn:e=>w.F.deleteFeedback(e),onSuccess:()=>{e.invalidateQueries({queryKey:["feedback"]}),e.invalidateQueries({queryKey:["analytics"]}),t({title:"Success",description:"Feedback deleted successfully"})},onError:e=>{t({title:"Error",description:e.message,variant:"destructive"})}})}();return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"Feedback"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Manage and analyze user feedback"})]}),(0,a.jsxs)(n.$,{onClick:()=>{if(!(null==V?void 0:V.items))return;let e=new Blob([["Date,User,Email,Rating,Sentiment,Category,Text",...V.items.map(e=>[new Date(e.createdAt).toLocaleDateString(),'"'.concat(e.userName,'"'),'"'.concat(e.userEmail,'"'),e.rating,e.sentiment,e.category,'"'.concat(e.text.replace(/"/g,'""'),'"')].join(","))].join("\n")],{type:"text/csv"}),t=URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="feedback-".concat(Date.now(),".csv"),s.click()},disabled:!(null==V||null==(e=V.items)?void 0:e.length),variant:"outline",children:[(0,a.jsx)(S,{className:"mr-2 h-4 w-4"}),"Export CSV"]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(T.A,{className:"absolute left-3 top-2.5 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(i.p,{placeholder:"Search feedback...",value:c,onChange:e=>O(e.target.value),className:"pl-9 bg-background"})]}),(0,a.jsxs)(d.l6,{value:D,onValueChange:e=>I(e),children:[(0,a.jsx)(d.bq,{className:"w-full sm:w-[180px] bg-background",children:(0,a.jsx)(d.yv,{placeholder:"All Sentiments"})}),(0,a.jsxs)(d.gC,{children:[(0,a.jsx)(d.eb,{value:"all",children:"All Sentiments"}),(0,a.jsx)(d.eb,{value:"positive",children:"Positive"}),(0,a.jsx)(d.eb,{value:"neutral",children:"Neutral"}),(0,a.jsx)(d.eb,{value:"negative",children:"Negative"})]})]}),(0,a.jsxs)(d.l6,{value:F,onValueChange:e=>q(e),children:[(0,a.jsx)(d.bq,{className:"w-full sm:w-[180px] bg-background",children:(0,a.jsx)(d.yv,{placeholder:"All Categories"})}),(0,a.jsxs)(d.gC,{children:[(0,a.jsx)(d.eb,{value:"all",children:"All Categories"}),(0,a.jsx)(d.eb,{value:"bug",children:"Bug Report"}),(0,a.jsx)(d.eb,{value:"feature",children:"Feature Request"}),(0,a.jsx)(d.eb,{value:"improvement",children:"Improvement"}),(0,a.jsx)(d.eb,{value:"complaint",children:"Complaint"}),(0,a.jsx)(d.eb,{value:"praise",children:"Praise"}),(0,a.jsx)(d.eb,{value:"other",children:"Other"})]})]})]}),(0,a.jsx)(r.Zp,{className:"border-border/50 shadow-sm",children:(0,a.jsx)(r.Wu,{className:"p-0",children:H?(0,a.jsx)("div",{className:"p-8 text-center text-muted-foreground",children:"Loading..."}):(null==V||null==(t=V.items)?void 0:t.length)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(o,{children:[(0,a.jsx)(x,{children:(0,a.jsxs)(m,{className:"bg-muted/40 hover:bg-muted/40",children:[(0,a.jsx)(h,{className:"w-[150px]",children:"Date"}),(0,a.jsx)(h,{className:"w-[200px]",children:"User"}),(0,a.jsx)(h,{className:"w-[120px]",children:"Rating"}),(0,a.jsx)(h,{className:"w-[120px]",children:"Sentiment"}),(0,a.jsx)(h,{className:"w-[120px]",children:"Category"}),(0,a.jsx)(h,{children:"Feedback"}),(0,a.jsx)(h,{className:"text-right w-[80px]"})]})}),(0,a.jsx)(u,{children:V.items.map(e=>(0,a.jsxs)(m,{className:"hover:bg-muted/20",children:[(0,a.jsx)(p,{className:"whitespace-nowrap text-muted-foreground text-xs",children:(0,M.m)(new Date(e.createdAt),{addSuffix:!0})}),(0,a.jsx)(p,{children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"font-medium text-sm",children:e.userName}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground truncate max-w-[180px]",title:e.userEmail,children:e.userEmail})]})}),(0,a.jsx)(p,{children:"pending"===e.processingStatus?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-yellow-400 rounded-full animate-pulse"}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Processing"})]}):"failed"===e.processingStatus?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-red-400 rounded-full"}),(0,a.jsx)("span",{className:"text-xs text-red-600",children:"Failed"})]}):(0,a.jsx)(j.z,{rating:e.rating,size:"sm"})}),(0,a.jsx)(p,{children:"completed"===e.processingStatus?(0,a.jsx)(f.b,{sentiment:e.sentiment}):(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"-"})}),(0,a.jsx)(p,{children:"completed"===e.processingStatus?(0,a.jsx)(g.i,{category:e.category}):(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"-"})}),(0,a.jsx)(p,{children:(0,a.jsx)("p",{className:"line-clamp-2 text-sm text-foreground/90 leading-relaxed max-w-[400px]",title:e.text,children:e.text})}),(0,a.jsx)(p,{className:"text-right",children:(0,a.jsx)(n.$,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-destructive transition-colors",onClick:()=>{var t;return t=e.id,void(confirm("Are you sure you want to delete this feedback?")&&U.mutate(t))},children:(0,a.jsx)(C.A,{className:"h-4 w-4"})})})]},e.id))})]}),V.hasMore&&(0,a.jsxs)("div",{className:"p-4 flex items-center justify-between border-t bg-muted/10",children:[(0,a.jsxs)("p",{className:"text-xs text-muted-foreground font-medium",children:["Showing ",V.items.length," of ",V.total," results"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(n.$,{variant:"outline",size:"sm",className:"h-8 gap-1",onClick:()=>P(e=>Math.max(1,e-1)),disabled:1===z,children:[(0,a.jsx)(R.A,{className:"h-3.5 w-3.5"}),"Previous"]}),(0,a.jsxs)(n.$,{variant:"outline",size:"sm",className:"h-8 gap-1",onClick:()=>P(e=>e+1),disabled:!V.hasMore,children:["Next",(0,a.jsx)(_.A,{className:"h-3.5 w-3.5"})]})]})]})]}):(0,a.jsx)("div",{className:"py-16",children:(0,a.jsx)(v.p,{icon:E.A,title:"No feedback found",description:"Try adjusting your filters or create a project to start collecting feedback."})})})})]})]})}}},e=>{e.O(0,[534,672,415,405,428,57,943,330,952,934,358],()=>e(e.s=1788)),_N_E=e.O()}]);